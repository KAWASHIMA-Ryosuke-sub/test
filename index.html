<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>太陽系複数惑星同時表示</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      overflow: hidden;
      touch-action: none; /* スクロール防止 */
    }
  </style>
</head>
<body>
<script>
const scaleFactor = Math.min(windowWidth, windowHeight) / 800;
const planets = [
  { name: "水星", synodic: 116, orbital: 88, R: 100 * scaleFactor, r: 20 * scaleFactor, color: [200, 200, 0] },
  { name: "金星", synodic: 584, orbital: 224.7, R: 150 * scaleFactor, r: 30 * scaleFactor, color: [255, 153, 0] },
  { name: "火星", synodic: 780, orbital: 687, R: 200 * scaleFactor, r: 50 * scaleFactor, color: [255, 0, 0] },
];

let timeScale = 1;
let t = 0;

function setup() {
  createCanvas(windowWidth, windowHeight); // スマホ画面全体を使用
  angleMode(RADIANS);
  frameRate(60);
}

function draw() {
  background(220);
  translate(width / 2, height / 2); // 中心をキャンバス中央に設定

  fill(0, 0, 255);
  noStroke();
  ellipse(0, 0, 12, 12); // 地球の中心

  for (let p of planets) {
    let omega = (2 * Math.PI / p.synodic) * timeScale;
    let Omega = (2 * Math.PI / p.orbital) * timeScale;

    let X_deferent = p.R * cos(omega * t);
    let Y_deferent = p.R * sin(omega * t);

    let X_planet = X_deferent + p.r * cos(Omega * t);
    let Y_planet = Y_deferent + p.r * sin(Omega * t);

    // 軌道の描画
    stroke(p.color[0], p.color[1], p.color[2]);
    noFill();
    ellipse(0, 0, 2 * p.R, 2 * p.R); // 遅動円

    // 惑星の描画
    fill(p.color[0], p.color[1], p.color[2]);
    ellipse(X_planet, Y_planet, 10, 10); // 惑星
  }

  t++;
}
</script>
</body>
</html>
